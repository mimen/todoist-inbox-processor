(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3196:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var r=t(5155),a=t(2115);function n(e){let{task:s,projects:t,labels:a}=e,n=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),l=e=>({berry_red:"#b8256f",red:"#db4035",orange:"#ff9933",yellow:"#fad000",olive_green:"#afb83b",lime_green:"#7ecc49",green:"#299438",mint_green:"#6accbc",teal:"#158fad",sky_blue:"#14aaf5",light_blue:"#96c3eb",blue:"#4073ff",grape:"#884dff",violet:"#af38eb",lavender:"#eb96eb",magenta:"#e05194",salmon:"#ff8d85",charcoal:"#808080",grey:"#b8b8b8",taupe:"#ccac93"})[e]||"#299fe6";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 task-card-enter",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-md border ".concat((e=>{switch(e){case 1:return"text-red-600 bg-red-50 border-red-200";case 2:return"text-orange-600 bg-orange-50 border-orange-200";case 3:return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})(s.priority)),children:["P",s.priority," • ",(e=>{switch(e){case 1:return"Urgent";case 2:return"High";case 3:return"Medium";default:return"Normal"}})(s.priority)]})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 leading-tight",children:s.content})]})}),s.description&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("p",{className:"text-gray-600 bg-gray-50 rounded-md p-3 text-sm leading-relaxed",children:s.description})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Project:"}),(0,r.jsx)("div",{className:"ml-2 inline-flex items-center space-x-2 bg-gray-100 px-2 py-1 rounded",children:(()=>{let e=t.find(e=>e.id===s.projectId),a=e?l(e.color):"#299fe6";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:a}}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:(null==e?void 0:e.name)||"Unknown Project"})]})})()})]}),s.labels.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Labels:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.labels.map(e=>{let s=a.find(s=>s.name===e),t=s?l(s.color):"#299fe6";return(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded flex items-center space-x-1",style:{backgroundColor:"".concat(t,"20"),color:t},children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:t}}),(0,r.jsx)("span",{children:e})]},e)})})]}),s.due&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Due:"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:n(s.due.date)})]})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Created: ",n(s.createdAt)]}),(0,r.jsxs)("span",{children:["ID: ",s.id]})]})})]})}function l(e){let{projects:s,selectedProjectId:t,onProjectChange:n,placeholder:l="Select project...",includeInbox:o=!0,className:i=""}=e,[c,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)(""),m=(0,a.useRef)(null),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&(d(!1),x(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{c&&g.current&&g.current.focus()},[c]);let p=e=>({berry_red:"#b8256f",red:"#db4035",orange:"#ff9933",yellow:"#fad000",olive_green:"#afb83b",lime_green:"#7ecc49",green:"#299438",mint_green:"#6accbc",teal:"#158fad",sky_blue:"#14aaf5",light_blue:"#96c3eb",blue:"#4073ff",grape:"#884dff",violet:"#af38eb",lavender:"#eb96eb",magenta:"#e05194",salmon:"#ff8d85",charcoal:"#808080",grey:"#b8b8b8",taupe:"#ccac93"})[e]||"#299fe6",b=(()=>{let e=s.filter(e=>!e.parentId&&!e.isInboxProject),t=s.filter(e=>e.parentId&&!e.isInboxProject),r=[];if(o){let e=s.find(e=>e.isInboxProject);r.push({id:(null==e?void 0:e.id)||"inbox",name:"Inbox",color:e?p(e.color):"#299fe6",indent:0})}let a=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.push({id:e.id,name:e.name,color:p(e.color),indent:s}),t.filter(s=>s.parentId===e.id).forEach(e=>a(e,s+1))};return e.forEach(e=>a(e)),r})(),h=b.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),f=b.find(e=>e.id===t),j=(e,s)=>{s.preventDefault(),s.stopPropagation(),n(e),d(!1),x("")};return(0,r.jsxs)("div",{className:"relative ".concat(i),ref:m,children:[(0,r.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),d(!c)},className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-md transition-colors",children:[(0,r.jsx)("div",{className:"flex items-center space-x-3",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:f.color}}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:f.name})]}):(0,r.jsx)("span",{className:"text-gray-500",children:l})}),(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform ".concat(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),c&&(0,r.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 dropdown-open",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,r.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,r.jsx)("input",{ref:g,type:"text",placeholder:"Search projects...",value:u,onChange:e=>{e.preventDefault(),e.stopPropagation(),x(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-todoist-blue focus:border-transparent text-sm"})}),(0,r.jsx)("div",{className:"max-h-64 overflow-y-auto",children:h.length>0?h.map(e=>(0,r.jsxs)("button",{type:"button",onClick:s=>j(e.id,s),className:"w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-50 transition-colors ".concat(t===e.id?"bg-blue-50 text-blue-900":"text-gray-900"),style:{paddingLeft:"".concat(12+20*e.indent,"px")},children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"font-medium flex-1",children:e.name}),t===e.id&&(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id)):(0,r.jsx)("div",{className:"p-3 text-center text-gray-500 text-sm",children:"No projects found"})})]})]})}function o(e){let{task:s,projects:t,labels:n,suggestions:o,onSubmit:i,onSkip:c}=e,[d,u]=(0,a.useState)({content:s.content,description:s.description||"",projectId:s.projectId,priority:s.priority,labels:[...s.labels],dueString:""}),[x,m]=(0,a.useState)(new Set(s.labels));(0,a.useEffect)(()=>{let e=document.querySelector('input[name="content"]');e&&(e.focus(),e.select())},[s.id]);let g=e=>{u(s=>({...s,projectId:e}))},p=e=>{u(s=>({...s,priority:e}))},b=e=>{let s=new Set(x);s.has(e)?s.delete(e):s.add(e),m(s)},h=e=>{switch(e.type){case"project":let s=t.find(s=>s.name===e.suggestion);s&&g(s.id);break;case"label":b(e.suggestion);break;case"rewrite":u(s=>({...s,content:e.suggestion}));break;case"priority":p(parseInt(e.suggestion))}},f=e=>({berry_red:"#b8256f",red:"#db4035",orange:"#ff9933",yellow:"#fad000",olive_green:"#afb83b",lime_green:"#7ecc49",green:"#299438",mint_green:"#6accbc",teal:"#158fad",sky_blue:"#14aaf5",light_blue:"#96c3eb",blue:"#4073ff",grape:"#884dff",violet:"#af38eb",lavender:"#eb96eb",magenta:"#e05194",salmon:"#ff8d85",charcoal:"#808080",grey:"#b8b8b8",taupe:"#ccac93"})[e]||"#299fe6",j=o.filter(e=>"project"===e.type),y=o.filter(e=>"label"===e.type),k=o.filter(e=>"rewrite"===e.type),v=o.filter(e=>"priority"===e.type);return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...d,labels:Array.from(x)})},className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Content"}),(0,r.jsx)("textarea",{name:"content",value:d.content,onChange:e=>u(s=>({...s,content:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-todoist-blue focus:border-transparent resize-none",rows:2,required:!0}),k.length>0&&(0,r.jsx)("div",{className:"mt-2",children:k.map((e,s)=>(0,r.jsxs)("button",{type:"button",onClick:()=>h(e),className:"text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded border border-purple-200 hover:bg-purple-100 transition-colors",children:["✨ AI Rewrite (",Math.round(100*e.confidence),"%)"]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (optional)"}),(0,r.jsx)("textarea",{value:d.description,onChange:e=>u(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-todoist-blue focus:border-transparent resize-none",rows:2,placeholder:"Add additional details..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project"}),(0,r.jsx)(l,{projects:t,selectedProjectId:d.projectId||"",onProjectChange:g,placeholder:"Select project...",includeInbox:!1,className:"mb-2"}),j.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:j.map((e,s)=>(0,r.jsxs)("button",{type:"button",onClick:()=>h(e),className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded border border-green-200 hover:bg-green-100 transition-colors",children:["\uD83E\uDD16 Suggest: ",e.suggestion," (",Math.round(100*e.confidence),"%)"]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,r.jsx)("div",{className:"flex gap-2 mb-2",children:[1,2,3,4].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>p(e),className:"px-3 py-2 rounded-md border font-medium transition-colors ".concat(d.priority===e?1===e?"bg-red-500 text-white border-red-500":2===e?"bg-orange-500 text-white border-orange-500":3===e?"bg-blue-500 text-white border-blue-500":"bg-gray-500 text-white border-gray-500":"bg-gray-50 hover:bg-gray-100 border-gray-200"),children:["P",e]},e))}),v.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:v.map((e,s)=>(0,r.jsxs)("button",{type:"button",onClick:()=>h(e),className:"text-xs bg-yellow-50 text-yellow-700 px-2 py-1 rounded border border-yellow-200 hover:bg-yellow-100 transition-colors",children:["⚡ Suggest: P",e.suggestion," (",Math.round(100*e.confidence),"%)"]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Labels"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:n.map(e=>{let s=f(e.color),t=x.has(e.name);return(0,r.jsxs)("button",{type:"button",onClick:()=>b(e.name),className:"px-3 py-1 rounded-full text-sm border transition-colors flex items-center space-x-2 ".concat(t?"text-white border-transparent":"bg-gray-50 hover:bg-gray-100 border-gray-200 text-gray-700"),style:t?{backgroundColor:s}:{},children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:s}}),(0,r.jsx)("span",{children:e.name})]},e.id)})}),y.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:y.map((e,s)=>(0,r.jsxs)("button",{type:"button",onClick:()=>h(e),className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded border border-blue-200 hover:bg-blue-100 transition-colors",children:["\uD83C\uDFF7️ Suggest: ",e.suggestion," (",Math.round(100*e.confidence),"%)"]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date (natural language)"}),(0,r.jsx)("input",{type:"text",value:d.dueString,onChange:e=>u(s=>({...s,dueString:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-todoist-blue focus:border-transparent",placeholder:"e.g., tomorrow, next friday, in 2 weeks..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:'Use natural language like "tomorrow", "next Friday", "in 2 weeks"'})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsxs)("button",{type:"submit",className:"flex-1 bg-todoist-blue text-white py-3 px-4 rounded-md hover:bg-blue-600 transition-colors font-medium focus:ring-2 focus:ring-todoist-blue focus:ring-offset-2",children:["Process Task ",(0,r.jsx)("span",{className:"kbd ml-2",children:"Enter"})]}),(0,r.jsxs)("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:["Skip ",(0,r.jsx)("span",{className:"kbd ml-1",children:"S"})]})]})]})})}function i(e){let{onClose:s}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Keyboard Shortcuts"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 rounded",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"space-y-3",children:[{key:"Enter",description:"Process current task"},{key:"S",description:"Skip current task"},{key:"?",description:"Toggle this help"},{key:"Esc",description:"Close this help"},{key:"Tab",description:"Navigate between form fields"},{key:"1-4",description:"Set priority (P1-P4)"}].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsx)("span",{className:"kbd",children:e.key})]},s))}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Press ",(0,r.jsx)("span",{className:"kbd",children:"?"})," anytime to toggle this help"]})})]})})}function c(e){let{current:s,total:t,progress:a}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[s," of ",t]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:(0,r.jsx)("div",{className:"bg-todoist-blue h-2 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(a,"%")}})}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[Math.round(a),"% complete"]})]})}function d(e){let{projects:s,selectedProjectId:t,onProjectChange:a,taskCount:n=0}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Processing Project"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[n," tasks"]})]}),(0,r.jsx)(l,{projects:s,selectedProjectId:t,onProjectChange:a,placeholder:"Select project to process...",includeInbox:!0}),(0,r.jsx)("div",{className:"mt-3 text-xs text-gray-500",children:"\uD83D\uDCA1 Select a project to process its tasks. Use keyboard shortcuts: S to skip, Enter to process."})]})}function u(){let[e,s]=(0,a.useState)({currentTask:null,queuedTasks:[],processedTasks:[],skippedTasks:[]}),[t,l]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[m,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!0),[h,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[k,v]=(0,a.useState)(""),[N,w]=(0,a.useState)([]),[T,C]=(0,a.useState)(0);(0,a.useEffect)(()=>{!async function(){try{b(!0),y(null);let[e,s]=await Promise.all([fetch("/api/todoist/projects"),fetch("/api/todoist/labels")]);if(!e.ok||!s.ok)throw Error("Failed to fetch data from Todoist API");let[t,r]=await Promise.all([e.json(),s.json()]);l(t),x(r);let a=t.find(e=>e.isInboxProject);v((null==a?void 0:a.id)||"inbox")}catch(e){console.error("Error loading initial data:",e),y(e instanceof Error?e.message:"Failed to load data")}finally{b(!1)}}()},[]);let S=(0,a.useCallback)(async e=>{if(e)try{f(!0),y(null),console.log("Loading tasks for project:",e);let t=await fetch("/api/todoist/tasks?projectId=".concat(e));if(!t.ok)throw Error("Failed to fetch tasks");let r=await t.json();console.log("Loaded tasks:",r),w(r),r.length>0?(s({currentTask:r[0],queuedTasks:r.slice(1),processedTasks:[],skippedTasks:[]}),C(e=>e+1)):s({currentTask:null,queuedTasks:[],processedTasks:[],skippedTasks:[]})}catch(e){console.error("Error loading project tasks:",e),y(e instanceof Error?e.message:"Failed to load tasks")}finally{f(!1)}},[]);(0,a.useEffect)(()=>{t.length>0&&k&&S(k)},[k,t.length,S]);let P=(0,a.useCallback)(()=>{s(e=>{let s=e.queuedTasks[0]||null,t=e.queuedTasks.slice(1);return s&&C(e=>e+1),{...e,currentTask:s,queuedTasks:t}})},[]),E=(0,a.useCallback)(async(e,t)=>{try{console.log("TaskProcessor.processTask called with:",{taskId:e,updates:t});let r=await fetch("/api/todoist/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(console.log("API Response status:",r.status),!r.ok){let e=await r.json();throw console.error("API Response error:",e),Error("Failed to update task: ".concat(e.error||r.statusText))}let a=await r.json();console.log("API Response data:",a),s(s=>({...s,processedTasks:[...s.processedTasks,e]})),P()}catch(e){console.error("Error processing task:",e),y(e instanceof Error?e.message:"Failed to process task")}},[P]),I=(0,a.useCallback)(()=>{e.currentTask&&(s(e=>({...e,skippedTasks:[...e.skippedTasks,e.currentTask.id]})),P())},[e.currentTask,P]);(0,a.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||document.querySelector('[role="listbox"]')||document.querySelector(".dropdown-open")))switch(e.key){case"s":e.preventDefault(),I();break;case"?":e.preventDefault(),g(!m);break;case"Escape":g(!1)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[I,m]);let L=N.length,D=e.processedTasks.length+e.skippedTasks.length,_=L>0?D/L*100:0;if(p)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-todoist-blue mx-auto"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Loading Todoist Data..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Fetching your inbox tasks, projects, and labels"})]})});if(j)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-red-600 mb-2",children:"Error Loading Data"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:j}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-todoist-blue text-white rounded-md hover:bg-blue-600 transition-colors",children:"Retry"})]})});if(!e.currentTask&&0===e.queuedTasks.length&&!p){var q;let s="inbox"===k?"Inbox":(null==(q=t.find(e=>e.id===k))?void 0:q.name)||"Project";return(0,r.jsxs)("div",{className:"min-h-screen p-4",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Task Processor"}),(0,r.jsxs)("button",{onClick:()=>g(!m),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:["Shortcuts ",(0,r.jsx)("span",{className:"kbd",children:"?"})]})]}),(0,r.jsx)(d,{projects:t,selectedProjectId:k,onProjectChange:v,taskCount:L}),h&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-todoist-blue"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading tasks..."})]})})]}),!h&&(0,r.jsx)("div",{className:"flex items-center justify-center",style:{minHeight:"50vh"},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:0===L?"\uD83D\uDCED":"\uD83C\uDF89"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:0===L?"".concat(s," is Empty"):"".concat(s," Complete!")}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:0===L?"No tasks found in ".concat(s,". Try selecting a different project."):"All tasks have been processed."}),L>0&&(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Processed: ",e.processedTasks.length," • Skipped: ",e.skippedTasks.length]}),(0,r.jsx)("button",{onClick:()=>S(k),className:"mt-4 px-4 py-2 bg-todoist-blue text-white rounded-md hover:bg-blue-600 transition-colors",children:"Refresh Tasks"})]})})]}),m&&(0,r.jsx)(i,{onClose:()=>g(!1)})]})}return(0,r.jsxs)("div",{className:"min-h-screen p-4",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Task Processor"}),(0,r.jsxs)("button",{onClick:()=>g(!m),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:["Shortcuts ",(0,r.jsx)("span",{className:"kbd",children:"?"})]})]}),(0,r.jsx)(d,{projects:t,selectedProjectId:k,onProjectChange:v,taskCount:L}),h&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-todoist-blue"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Loading tasks..."})]})}),L>0&&(0,r.jsx)(c,{current:D+1,total:L,progress:_})]}),e.currentTask&&!h&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)("div",{className:"lg:sticky lg:top-4 h-fit",children:(0,r.jsx)(n,{task:e.currentTask,projects:t,labels:u})}),(0,r.jsx)("div",{children:(0,r.jsx)(o,{task:e.currentTask,projects:t,labels:u,suggestions:function(e){let s=[],t=e.toLowerCase();return t.includes("call")||t.includes("phone")||t.includes("mom")||t.includes("family")?s.push({type:"project",suggestion:"Personal",confidence:.85,reasoning:"Personal communication task"}):t.includes("work")||t.includes("meeting")||t.includes("report")||t.includes("budget")?s.push({type:"project",suggestion:"Work",confidence:.9,reasoning:"Work-related task"}):(t.includes("buy")||t.includes("shop")||t.includes("groceries"))&&s.push({type:"project",suggestion:"Shopping",confidence:.95,reasoning:"Shopping or purchasing task"}),(t.includes("call")||t.includes("phone"))&&s.push({type:"label",suggestion:"phone",confidence:.9,reasoning:"Phone communication required"}),(t.includes("urgent")||t.includes("asap")||t.includes("important"))&&s.push({type:"label",suggestion:"urgent",confidence:.8,reasoning:"Task indicates urgency"}),t.includes("urgent")||t.includes("asap")||t.includes("critical")?s.push({type:"priority",suggestion:"4",confidence:.85,reasoning:"High priority language detected"}):(t.includes("important")||t.includes("deadline"))&&s.push({type:"priority",suggestion:"3",confidence:.75,reasoning:"Medium-high priority indicated"}),(t.length<30||!t.includes(" "))&&s.push({type:"rewrite",suggestion:function(e){let s=e.toLowerCase();if(s.includes("call mom"))return"Call mom to discuss weekend plans and confirm dinner time";if(s.includes("buy groceries"))return"Go to grocery store and buy milk, bread, eggs, and vegetables for the week";if(s.includes("fix")&&s.includes("website"))return"Investigate and fix the 404 error on website contact page";if(s.includes("dentist"))return"Call dentist office to schedule routine cleaning appointment";if(s.includes("review")&&s.includes("budget"))return"Review Q4 budget report and prepare summary for board meeting";return"Complete task: ".concat(e," - add specific details and next actions")}(e),confidence:.7,reasoning:"Make task more specific and actionable"}),s}(e.currentTask.content),onSubmit:s=>E(e.currentTask.id,s),onSkip:I},T)})]}),e.queuedTasks.length>0&&(0,r.jsxs)("div",{className:"mt-8 p-4 bg-white rounded-lg shadow-sm border",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Next in queue (",e.queuedTasks.length," remaining)"]}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.queuedTasks.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"text-sm text-gray-600 truncate",children:[s+1,". ",e.content]},e.id)),e.queuedTasks.length>3&&(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["+ ",e.queuedTasks.length-3," more..."]})]})]})]}),m&&(0,r.jsx)(i,{onClose:()=>g(!1)})]})}},6667:(e,s,t)=>{Promise.resolve().then(t.bind(t,3196))}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(6667)),_N_E=e.O()}]);